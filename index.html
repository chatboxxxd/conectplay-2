<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ConectPlay ‚Äî Programa de Afiliados</title>

<!-- Google font -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap" rel="stylesheet">

<style>
  body {
    font-family: "Montserrat", sans-serif;
    background: #0b0720;
    color: #f5f5f7;
    padding: 24px;
  }
  .container {
    max-width: 980px;
    margin: auto;
    background: rgba(255,255,255,0.03);
    border-radius: 16px;
    padding: 28px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.6);
  }
  h1 {
    margin-top: 0;
  }
  label {
    display: block;
    margin: 12px 0 6px;
  }
  input[type="text"] {
    width: 100%;
    padding: 12px;
    border-radius: 8px;
    border: none;
    font-size: 16px;
    margin-bottom: 12px;
  }
  .btn-wpp {
    padding: 10px 15px;
    border-radius: 8px;
    background: linear-gradient(90deg, #6f3bff, #22b0ff);
    border: none;
    color: white;
    font-weight: 700;
    cursor: pointer;
    margin: 6px 0;
    display: inline-block;
    text-decoration: none;
  }
  #affiliateLink {
    width: 100%;
    padding: 10px;
    font-size: 14px;
    margin: 12px 0;
    border-radius: 8px;
    border: none;
    background: #222;
    color: #eee;
  }
  .plans {
    margin-top: 20px;
  }
  .plan {
    margin-bottom: 10px;
    background: rgba(255,255,255,0.02);
    padding: 12px;
    border-radius: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
</style>
</head>
<body>

<div class="container">
  <h1>Programa de Afiliados ConectPlay</h1>

  <label for="apelidoInput">Digite seu nome ou apelido:</label>
  <input type="text" id="apelidoInput" placeholder="Seu apelido" />

  <button id="gerarBtn" class="btn-wpp">Gerar link de afiliado</button>

  <label for="affiliateLink">Seu link de afiliado:</label>
  <input type="text" id="affiliateLink" readonly placeholder="Aqui aparecer√° seu link" />

  <div class="plans" id="plansContainer">
    <h2>Planos dispon√≠veis</h2>
    <!-- Planos ser√£o inseridos aqui -->
  </div>
</div>

<script>
  // Configura√ß√µes
  const WHATSAPP_NUMBER = '5577991986049'; // Seu WhatsApp
  const WPP_BASE_MESSAGE = `Confira nossos planos atualizados ‚¨áÔ∏è
üìÖ 15 DIAS DE USO: R$14,99
üìÖ Mensal: R$ 20,99 (1 acesso) / R$ 25,99 (2 acessos)
üìÖ Bimestral: R$ 41,99 (1 acesso) / R$ 43,99 (2 acessos)
üìÖ Trimestral: R$ 74,99 (1 acesso) / R$ 76,99 (2 acessos)
üìÖ Semestral: R$149,99 (1 acesso) / R$153,99 (2 acessos)
üìÖ Anual: R$297,99 (1 acesso) / R$299,99 (2 acessos)

‚úÖ Teste gr√°tis dispon√≠vel!

Gostaria do plano: `;

  const PLANS = [
    { id: '15dias', name: '15 DIAS', price: 'R$14,99', accesses: '1 acesso' },
    { id: 'mensal_1', name: 'Mensal', price: 'R$20,99', accesses: '1 acesso' },
    { id: 'mensal_2', name: 'Mensal', price: 'R$25,99', accesses: '2 acessos' },
    { id: 'bimestral_1', name: 'Bimestral', price: 'R$41,99', accesses: '1 acesso' },
    { id: 'bimestral_2', name: 'Bimestral', price: 'R$43,99', accesses: '2 acessos' },
    { id: 'trimestral_1', name: 'Trimestral', price: 'R$74,99', accesses: '1 acesso' },
    { id: 'trimestral_2', name: 'Trimestral', price: 'R$76,99', accesses: '2 acessos' },
    { id: 'semestral_1', name: 'Semestral', price: 'R$149,99', accesses: '1 acesso' },
    { id: 'semestral_2', name: 'Semestral', price: 'R$153,99', accesses: '2 acessos' },
    { id: 'anual_1', name: 'Anual', price: 'R$297,99', accesses: '1 acesso' },
    { id: 'anual_2', name: 'Anual', price: 'R$299,99', accesses: '2 acessos' }
  ];

  // Fun√ß√£o para ler par√¢metro da URL
  function getParam(name) {
    const url = new URL(window.location.href);
    return url.searchParams.get(name);
  }

  // Monta o link de afiliado com o apelido
  function gerarLink(apelido) {
    const baseUrl = window.location.origin + window.location.pathname;
    const url = new URL(baseUrl);
    url.searchParams.set('apelido', apelido.trim());
    return url.toString();
  }

  // Mostra os planos e adiciona os bot√µes WhatsApp
  function renderPlans(apelido) {
    const container = document.getElementById('plansContainer');
    container.innerHTML = '<h2>Planos dispon√≠veis</h2>';
    PLANS.forEach(plan => {
      const div = document.createElement('div');
      div.className = 'plan';

      // Monta a mensagem para WhatsApp com o plano e apelido
      const msg = WPP_BASE_MESSAGE + `${plan.name} - ${plan.accesses} - ${plan.price}` + (apelido ? `\n\nApelido do afiliado: ${apelido}` : '');
      const encodedMsg = encodeURIComponent(msg);
      const waLink = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodedMsg}`;

      div.innerHTML = `
        <div><strong>${plan.name} ‚Äî ${plan.accesses}</strong> ‚Äî ${plan.price}</div>
        <a href="${waLink}" target="_blank" class="btn-wpp">Quero esse plano</a>
      `;

      container.appendChild(div);
    });
  }

  // Atualiza o campo do link de afiliado e renderiza os planos
  function atualizarPaginaComApelido(apelido) {
    document.getElementById('apelidoInput').value = apelido;
    document.getElementById('affiliateLink').value = gerarLink(apelido);
    renderPlans(apelido);
  }

  // Evento do bot√£o para gerar link
  document.getElementById('gerarBtn').addEventListener('click', () => {
    const apelido = document.getElementById('apelidoInput').value.trim();
    if (!apelido) {
      alert('Por favor, digite seu nome ou apelido.');
      return;
    }
    atualizarPaginaComApelido(apelido);
    // Atualiza URL no navegador (sem recarregar)
    const url = new URL(window.location.href);
    url.searchParams.set('apelido', apelido);
    window.history.replaceState({}, '', url);
  });

  // Na carga da p√°gina, tenta pegar apelido da URL e j√° atualizar
  document.addEventListener('DOMContentLoaded', () => {
    let apelido = getParam('apelido');
    if (apelido) {
      atualizarPaginaComApelido(apelido);
    }
  });

  // Bot√£o copiar link
  document.getElementById('affiliateLink').addEventListener('click', function(){
    this.select();
  });
</script>

</body>
</html>
