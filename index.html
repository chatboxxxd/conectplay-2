<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ConectPlay ‚Äî Afiliados</title>

<!-- Google font -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap" rel="stylesheet">

<!-- PapaParse (CDN) -->
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>

<style>
  :root{
    --bg1: #0b0720;
    --accent1: #6f3bff; /* roxo */
    --accent2: #22b0ff; /* azul */
    --text: #f5f5f7;
    --muted: #bfb8d6;
    --card-bg: rgba(255,255,255,0.03);
    --glass: rgba(255,255,255,0.03);
    --accent-strong: #FFD400; /* amarelo para b√¥nus */
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    min-height:100vh;
    font-family: "Montserrat", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background:
      radial-gradient(1200px 600px at 10% 10%, rgba(34,176,255,0.06), transparent 10%),
      radial-gradient(900px 400px at 90% 90%, rgba(111,59,255,0.06), transparent 10%),
      var(--bg1);
    color:var(--text);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    padding:24px;
  }

  .container{
    max-width:980px;
    margin:18px auto;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:16px;
    padding:28px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.6);
    border: 1px solid rgba(255,255,255,0.03);
  }

  .header{
    display:flex;
    gap:18px;
    align-items:center;
    margin-bottom:18px;
  }

  .logo {
    width:96px;
    height:96px;
    border-radius:12px;
    background: linear-gradient(135deg,var(--accent1),var(--accent2));
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:800;
    color:white;
    letter-spacing:1px;
    box-shadow: 0 6px 18px rgba(33,10,60,0.5), inset 0 -6px 20px rgba(255,255,255,0.03);
    flex:0 0 96px;
    font-size:20px;
  }

  .title{
    flex:1;
  }
  .title h1{
    margin:0 0 6px 0;
    font-size:22px;
    letter-spacing:0.5px;
  }
  .title p{
    margin:0;
    color:var(--muted);
    font-size:14px;
  }

  .welcome{
    margin-top:8px;
    background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    padding:12px;
    border-radius:10px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:12px;
    border:1px solid rgba(255,255,255,0.02);
  }

  .main{
    display:grid;
    grid-template-columns: 1fr 360px;
    gap:20px;
    margin-top:18px;
  }

  /* left column */
  .left{
    background:var(--card-bg);
    padding:18px;
    border-radius:12px;
    min-height:300px;
  }

  .plans{
    display:flex;
    flex-direction:column;
    gap:10px;
    margin-bottom:16px;
  }

  .plan{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:12px;
    padding:12px;
    border-radius:10px;
    background: linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border:1px solid rgba(255,255,255,0.02);
  }
  .plan .leftinfo{
    display:flex;
    flex-direction:column;
  }
  .plan .name{ font-weight:700; font-size:15px }
  .plan .price{ color:var(--muted); font-size:14px }

  .btn-wpp{
    padding:10px 12px;
    border-radius:8px;
    background: linear-gradient(90deg,var(--accent1),var(--accent2));
    border:none;
    color:white;
    font-weight:700;
    cursor:pointer;
    text-decoration:none;
  }

  /* ranking */
  #ranking{
    margin-top:18px;
    padding:12px;
    border-radius:10px;
    background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));
    border:1px solid rgba(255,255,255,0.02);
  }

  #ranking h3{ margin:0 0 8px 0; font-size:16px; }
  #ranking ol{ margin:0 0 0 18px; padding:0; color:var(--muted) }

  /* right column */
  .right{
    padding:18px;
    border-radius:12px;
    background: linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01));
    border:1px solid rgba(255,255,255,0.02);
    min-height:300px;
  }

  .comm-table{
    width:100%;
    border-collapse:collapse;
    margin-bottom:14px;
  }
  .comm-table th, .comm-table td{
    padding:12px;
    text-align:center;
    border:1px solid rgba(255,255,255,0.03);
  }
  .comm-table th{
    background: rgba(111,59,255,0.08);
    font-weight:700;
  }
  .bonus{
    background: linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    padding:12px;
    border-radius:8px;
    text-align:center;
    margin-bottom:12px;
  }
  .bonus h2{ margin:6px 0; color:var(--accent-strong) }
  .affiliate-actions{
    display:flex;
    gap:8px;
    flex-direction:column;
  }

  .copybtn{
    padding:12px;
    border-radius:10px;
    background:transparent;
    color:var(--text);
    border:2px solid rgba(111,59,255,0.5);
    font-weight:700;
    cursor:pointer;
  }

  .small{
    color:var(--muted);
    font-size:13px;
  }

  footer{
    margin-top:18px;
    color:var(--muted);
    font-size:13px;
    text-align:center;
  }

  /* responsive */
  @media (max-width:920px){
    .main{ grid-template-columns: 1fr; }
    .right{ order:2 }
  }
</style>
</head>
<body>

<div class="container" role="main">
  <div class="header">
    <div class="logo" aria-hidden="true">PLAY</div>
    <div class="title">
      <h1>ConectPlay ‚Äî Programa de Afiliados</h1>
      <p>Indique amigos, ganhe comiss√£o e concorra ao b√¥nus final.</p>
    </div>
  </div>

  <div id="greeting" class="welcome" style="display:none;">
    <div>
      <strong id="greetName">Ol√°!</strong>
      <div class="small">Use seu link de afiliado para ganhar comiss√µes ‚Äî confira abaixo.</div>
    </div>
    <div style="text-align:right">
      <div class="small">Seu Apelido:</div>
      <div id="greetApelido" style="font-weight:800;"></div>
    </div>
  </div>

  <div class="main">
    <div class="left">
      <h2 style="margin-top:0">Planos Dispon√≠veis</h2>

      <div class="plans" id="plansList">
        <!-- planos ser√£o inseridos por JS -->
      </div>

      <div id="ranking" aria-live="polite">
        <h3>Top Vendedores</h3>
        <div id="rankingContent"><em>Carregando ranking...</em></div>
      </div>
    </div>

    <aside class="right" aria-label="Comiss√µes & Afiliado">
      <h3 style="margin-top:0">Comiss√µes</h3>

      <table class="comm-table" role="table" aria-label="Tabela de comiss√µes">
        <thead>
          <tr><th>Faixa de Indica√ß√µes</th><th>Comiss√£o</th></tr>
        </thead>
        <tbody>
          <tr><td>1 a 100 indica√ß√µes</td><td>R$ 7</td></tr>
          <tr><td>101 a 300 indica√ß√µes</td><td>R$ 8</td></tr>
          <tr><td>301 a 600 indica√ß√µes</td><td>R$ 9</td></tr>
          <tr><td>601 a 1000 indica√ß√µes</td><td>R$ 10</td></tr>
        </tbody>
      </table>

      <div class="bonus">
        <h2>B√îNUS</h2>
        <div style="font-weight:700">R$2.000 + 1 ano de IPTV gratuito</div>
        <div class="small">ao atingir 1000 indica√ß√µes</div>
      </div>

      <div style="margin-bottom:12px;">
        <div style="font-weight:700; margin-bottom:6px">Seu link de afiliado</div>
        <div class="small" style="margin-bottom:8px">Copie e compartilhe ‚Äî quando algu√©m comprar pelo seu link ele ser√° identificado automaticamente.</div>

        <div class="affiliate-actions">
          <input id="affiliateInput" type="text" readonly style="padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--text)" value="" />
          <button id="copyBtn" class="copybtn" aria-label="Copiar link de afiliado">Copiar link de afiliado</button>
        </div>
      </div>

      <div style="margin-top:8px;">
        <div style="font-weight:700">Atendimento</div>
        <div class="small">Clique em um bot√£o de plano para falar no WhatsApp com atendimento e iniciar a venda.</div>
      </div>
    </aside>
  </div>

  <footer>
    <div>Teste gr√°tis dispon√≠vel ‚Äî venda √© conclu√≠da via WhatsApp.</div>
  </footer>
</div>

<script>
/* ============================
   CONFIGURA√á√ïES (edite aqui se precisar)
   ============================ */

/* Planos ‚Äî formato: { id, name, price, accesses } */
const PLANS = [
  { id: '15dias', name: '15 DIAS', price: 'R$14,99', accesses: '1 acesso' },
  { id: 'mensal_1', name: 'Mensal', price: 'R$20,99', accesses: '1 acesso' },
  { id: 'mensal_2', name: 'Mensal', price: 'R$25,99', accesses: '2 acessos' },
  { id: 'bimestral_1', name: 'Bimestral', price: 'R$41,99', accesses: '1 acesso' },
  { id: 'bimestral_2', name: 'Bimestral', price: 'R$43,99', accesses: '2 acessos' },
  { id: 'trimestral_1', name: 'Trimestral', price: 'R$74,99', accesses: '1 acesso' },
  { id: 'trimestral_2', name: 'Trimestral', price: 'R$76,99', accesses: '2 acessos' },
  { id: 'semestral_1', name: 'Semestral', price: 'R$149,99', accesses: '1 acesso' },
  { id: 'semestral_2', name: 'Semestral', price: 'R$153,99', accesses: '2 acessos' },
  { id: 'anual_1', name: 'Anual', price: 'R$297,99', accesses: '1 acesso' },
  { id: 'anual_2', name: 'Anual', price: 'R$299,99', accesses: '2 acessos' }
];

/* N√∫mero do WhatsApp (sem +, sem espa√ßos). Ex.: 5511999999999 */
const WHATSAPP_NUMBER = '5577991986049';

/* Texto base para WhatsApp ‚Äî ser√° complementado com o plano escolhido */
const WPP_BASE_MESSAGE = `Confira nossos planos atualizados ‚¨áÔ∏è
üìÖ 15 DIAS DE USO: R$14,99
üìÖ Mensal: R$ 20,99 (1 acesso) / R$ 25,99 (2 acessos)
üìÖ Bimestral: R$ 41,99 (1 acesso) / R$ 43,99 (2 acessos)
üìÖ Trimestral: R$ 74,99 (1 acesso) / R$ 76,99 (2 acessos)
üìÖ Semestral: R$149,99 (1 acesso) / R$153,99 (2 acessos)
üìÖ Anual: R$297,99 (1 acesso) / R$299,99 (2 acessos)

‚úÖ Teste gr√°tis dispon√≠vel!

Gostaria do plano: `;

/* Planilha p√∫blica (seu link convertido para output=csv) */
const CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRVxgmYQsCQMXj4hycv10FMS8vNm1CF3EXgbyz2yVE-_ljhsPMmv0HOppUlYnMUejkuVcErojpLchgF/pub?gid=0&single=true&output=csv';

/* ============================
   FIM CONFIG
   ============================ */

/* Util: pega param da URL */
function getParam(name){
  name = name.replace(/[[]]/g, '\\$&');
  const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)');
  const results = regex.exec(window.location.href);
  if (!results) return null;
  if (!results[2]) return '';
  return decodeURIComponent(results[2].replace(/\+/g, ' '));
}

/* inicializa planos na tela */
function renderPlans(){
  const container = document.getElementById('plansList');
  container.innerHTML = '';
  PLANS.forEach(p => {
    const div = document.createElement('div');
    div.className = 'plan';
    div.innerHTML = `
      <div class="leftinfo">
        <div class="name">${p.name} ‚Äî ${p.accesses}</div>
        <div class="price">${p.price}</div>
      </div>
      <div>
        <a class="btn-wpp" href="#" data-plan="${encodeURIComponent(p.name + ' - ' + p.accesses + ' - ' + p.price)}" aria-label="Falar no WhatsApp para comprar plano ${p.name} - ${p.accesses} - ${p.price}">Quero esse plano</a>
      </div>
    `;
    container.appendChild(div);
  });

  // attach handlers to WhatsApp buttons
  document.querySelectorAll('.btn-wpp').forEach(btn => {
    btn.addEventListener('click', function(e){
      e.preventDefault();
      const planLabel = decodeURIComponent(this.getAttribute('data-plan'));
      const apelido = getParam('apelido') || '';
      const finalMessage = WPP_BASE_MESSAGE + planLabel + (apelido ? `\n\nApelido do afiliado: ${apelido}` : '');
      const encoded = encodeURIComponent(finalMessage);
      const wa = `https://wa.me/${WHATSAPP_NUMBER}?text=${encoded}`;
      window.open(wa, '_blank');
    });
  });
}

/* cria link de afiliado (URL atual com ?apelido=XXXX) */
function buildAffiliateLink(apelido){
  const url = new URL(window.location.href.split('#')[0]);
  if(apelido){
    url.searchParams.set('apelido', apelido);
  } else {
    url.searchParams.delete('apelido');
  }
  return url.toString();
}

/* copia texto para clipboard */
async function copyToClipboard(text){
  try {
    await navigator.clipboard.writeText(text);
    alert('Link copiado para a √°rea de transfer√™ncia!');
  } catch (err) {
    // fallback
    const inp = document.createElement('input');
    document.body.appendChild(inp);
    inp.value = text;
    inp.select();
    document.execCommand('copy');
    document.body.removeChild(inp);
    alert('Link copiado (fallback).');
  }
}

/* Renderiza greeting e link de afiliado */
function renderGreeting(){
  const apelido = getParam('apelido') || '';
  if(apelido){
    document.getElementById('greeting').style.display = 'flex';
    document.getElementById('greetName').innerText = `Ol√°, ${apelido}!`;
    document.getElementById('greetApelido').innerText = apelido;
  } else {
    document.getElementById('greeting').style.display = 'none';
  }
  const affLink = buildAffiliateLink(apelido);
  const input = document.getElementById('affiliateInput');
  input.value = affLink;
}

/* Inicializa√ß√£o */
document.addEventListener('DOMContentLoaded', function(){
  renderPlans();
  renderGreeting();

  // copiar link ao clicar no bot√£o
  document.getElementById('copyBtn').addEventListener('click', function(){
    const input = document.getElementById('affiliateInput');
    copyToClipboard(input.value);
  });
});
</script>
</body>
</html>
